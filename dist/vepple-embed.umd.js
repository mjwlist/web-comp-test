(function(a){typeof define=="function"&&define.amd?define(a):a()})(function(){"use strict";function a(){}function V(e){return e&&typeof e=="object"&&typeof e.then=="function"}function M(e){return e()}function O(){return Object.create(null)}function $(e){e.forEach(M)}function z(e){return typeof e=="function"}function B(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let C;function J(e,t){return C||(C=document.createElement("a")),C.href=t,e===C.href}function Q(e){return Object.keys(e).length===0}function w(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function _(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function W(){return v(" ")}function K(){return v("")}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function X(e){return Array.from(e.childNodes)}function S(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Y(e){const t={};for(const n of e)t[n.name]=n.value;return t}let x;function d(e){x=e}function Z(){if(!x)throw new Error("Function called outside component initialization");return x}const E=[],L=[],j=[],P=[],tt=Promise.resolve();let T=!1;function et(){T||(T=!0,tt.then(k))}function N(e){j.push(e)}const U=new Set;let q=0;function k(){const e=x;do{for(;q<E.length;){const t=E[q];q++,d(t),nt(t.$$)}for(d(null),E.length=0,q=0;L.length;)L.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];U.has(n)||(U.add(n),n())}j.length=0}while(E.length);for(;P.length;)P.pop()();T=!1,U.clear(),d(e)}function nt(e){if(e.fragment!==null){e.update(),$(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const A=new Set;let g;function rt(){g={r:0,c:[],p:g}}function ct(){g.r||$(g.c),g=g.p}function R(e,t){e&&e.i&&(A.delete(e),e.i(t))}function ot(e,t,n,r){if(e&&e.o){if(A.has(e))return;A.add(e),g.c.push(()=>{A.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function H(e,t){const n=t.token={};function r(c,o,s,m){if(t.token!==n)return;t.resolved=m;let i=t.ctx;s!==void 0&&(i=i.slice(),i[s]=m);const l=c&&(t.current=c)(i);let f=!1;t.block&&(t.blocks?t.blocks.forEach((u,y)=>{y!==o&&u&&(rt(),ot(u,1,1,()=>{t.blocks[y]===u&&(t.blocks[y]=null)}),ct())}):t.block.d(1),l.c(),R(l,1),l.m(t.mount(),t.anchor),f=!0),t.block=l,t.blocks&&(t.blocks[o]=l),f&&k()}if(V(e)){const c=Z();if(e.then(o=>{d(c),r(t.then,1,t.value,o),d(null)},o=>{if(d(c),r(t.catch,2,t.error,o),d(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function I(e,t,n){const r=t.slice(),{resolved:c}=e;e.current===e.then&&(r[e.value]=c),e.current===e.catch&&(r[e.error]=c),e.block.p(r,n)}function lt(e,t,n,r){const{fragment:c,on_mount:o,on_destroy:s,after_update:m}=e.$$;c&&c.m(t,n),r||N(()=>{const i=o.map(M).filter(z);s?s.push(...i):$(i),e.$$.on_mount=[]}),m.forEach(N)}function st(e,t){const n=e.$$;n.fragment!==null&&($(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function at(e,t){e.$$.dirty[0]===-1&&(E.push(e),et(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,n,r,c,o,s,m=[-1]){const i=x;d(e);const l=e.$$={fragment:null,ctx:null,props:o,update:a,not_equal:c,bound:O(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:O(),dirty:m,skip_bound:!1,root:t.target||i.$$.root};s&&s(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(u,y,...F)=>{const G=F.length?F[0]:y;return l.ctx&&c(l.ctx[u],l.ctx[u]=G)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](G),f&&at(e,u)),y}):[],l.update(),f=!0,$(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const u=X(t.target);l.fragment&&l.fragment.l(u),u.forEach(p)}else l.fragment&&l.fragment.c();t.intro&&R(e.$$.fragment),lt(e,t.target,t.anchor,t.customElement),k()}d(i)}let D;typeof HTMLElement=="function"&&(D=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(M).filter(z);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){$(this.$$.on_disconnect)}$destroy(){st(this,1),this.$destroy=a}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Q(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});function ut(e){let t,n=e[6].message+"",r;return{c(){t=_("p"),r=v(n),S(t,"color","red")},m(c,o){h(c,t,o),w(t,r)},p:a,d(c){c&&p(t)}}}function ft(e){let t,n,r;return{c(){t=_("div"),n=_("iframe"),n.allowFullscreen=!0,S(n,"border-style","none"),b(n,"part","iframe"),J(n.src,r=`${bt}${e[0].panorama.mediaItemUrl}&preview=${e[0].panorama.sourceUrl}&config=${gt}`)||b(n,"src",r),b(t,"class","wrap"),b(t,"part","wrap")},m(c,o){h(c,t,o),w(t,n)},p:a,d(c){c&&p(t)}}}function dt(e){let t;return{c(){t=_("p"),t.textContent="...waiting"},m(n,r){h(n,t,r)},p:a,d(n){n&&p(t)}}}function ht(e){let t,n=e[6].message+"",r;return{c(){t=_("p"),r=v(n),S(t,"color","red")},m(c,o){h(c,t,o),w(t,r)},p:a,d(c){c&&p(t)}}}function pt(e){let t,n,r=e[1].ctaText+"",c;return{c(){t=_("div"),n=_("a"),c=v(r),b(n,"part","link"),b(n,"href",e[1].ctaUrl),b(t,"part","content")},m(o,s){h(o,t,s),w(t,n),w(n,c)},p:a,d(o){o&&p(t)}}}function mt(e){return{c:a,m:a,p:a,d:a}}function _t(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!0,pending:dt,then:ft,catch:ut,value:0,error:6};H(e[0],r);let c={ctx:e,current:null,token:null,hasCatch:!0,pending:mt,then:pt,catch:ht,value:1,error:6};return H(e[1],c),{c(){r.block.c(),t=W(),n=K(),c.block.c(),this.c=a},m(o,s){r.block.m(o,r.anchor=s),r.mount=()=>t.parentNode,r.anchor=t,h(o,t,s),h(o,n,s),c.block.m(o,c.anchor=s),c.mount=()=>n.parentNode,c.anchor=n},p(o,[s]){e=o,I(r,e,s),I(c,e,s)},i:a,o:a,d(o){r.block.d(o),r.token=null,r=null,o&&p(t),o&&p(n),c.block.d(o),c.token=null,c=null}}}const bt="https://cdn.pannellum.org/2.5/pannellum.htm#panorama=",gt="https://mjwlist.github.io/web-comp-test/src/lib/config.json";function $t(e,t,n){let{post:r}=t,{api:c}=t;async function o(){const l=await fetch(`${c}/wp-json/rv/v1/settings`),f=await l.json();if(l.ok)return f.ctas[0];throw new Error(f)}async function s(){const l=await fetch(`${c}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
            query MyQuery($name: String!) {
              posts(where: {name: $name}) {
                  nodes {
                    slug
                    postContent {
                      panorama {
                        title(format: RAW)
                        mediaItemUrl
                        sourceUrl(size: MEDIUM_LARGE)
                      }
                      position {
                        horizontal
                        vertical
                      }
                    }
                  }
                }
            }
      `,variables:{name:r}})}),f=await l.json();if(l.ok)return f.data.posts.nodes[0].postContent;throw new Error(f)}const m=s();let i=o();return e.$$set=l=>{"post"in l&&n(2,r=l.post),"api"in l&&n(3,c=l.api)},[m,i,r,c]}class kt extends D{constructor(t){super();this.shadowRoot.innerHTML="<style>*,*:before,*:after{box-sizing:inherit}.wrap{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}iframe{position:absolute;top:0;left:0;width:100%;height:100%}</style>",it(this,{target:this.shadowRoot,props:Y(this.attributes),customElement:!0},$t,_t,B,{post:2,api:3},null),t&&(t.target&&h(t.target,this,t.anchor),t.props&&(this.$set(t.props),k()))}static get observedAttributes(){return["post","api"]}get post(){return this.$$.ctx[2]}set post(t){this.$$set({post:t}),k()}get api(){return this.$$.ctx[3]}set api(t){this.$$set({api:t}),k()}}customElements.define("vepple-embed",kt)});
